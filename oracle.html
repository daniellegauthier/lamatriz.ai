<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>La Matriz Consulting Color Oracle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="La Matriz Consulting Color Oracle — a chromatic interface for choices and care. Explore 11 color sequences and open the GPT to continue.">
  <link rel="preload" href="/assets/fonts/Inter-Variable.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="stylesheet" href="style.css">
  <link rel="canonical" href="https://lamatriz.ai/oracle">
  <meta property="og:title" content="La Matriz Consulting Color Oracle">
  <meta property="og:description" content="Sovereignty. Color as interface between inner knowing and outer data.">
  <meta property="og:image" content="https://lamatriz.ai/og.png">
  <meta name="theme-color" content="#0B0B0C">
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"La Matriz Consulting Color Oracle",
    "applicationCategory":"AIAssistant",
    "operatingSystem":"Web",
    "url":"https://lamatriz.ai/oracle",
    "softwareHelp":"https://chatgpt.com/g/g-686180b5d47c8191bdbb1922b79a2ebb-la-matriz-consulting-color-oracle",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>
</head>
<body>

<header>
  <div class="container header-inner">
    <a class="logo" href="/">lamatriz.ai</a>
    <button id="menuToggle" aria-expanded="false" aria-controls="primaryNav">Menu</button>
    <nav id="primaryNav">
      <a href="/consulting">Consulting</a>
      <a href="/api">API</a>
      <a href="/thesis">Thesis</a>
      <a href="/oracle" aria-current="page">Oracle</a>
      <a href="/soulcoin">Soulcoin</a>
      <a class="cta" href="/contact">Contact</a>
    </nav>
  </div>
</header>

<main>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div>
        <h1>Color Oracle — choose a path, not an answer.</h1>
        <p>Use color to see your options with care. The Oracle offers sequences you can read, feel, and act on - a mirror of trajectories, not a verdict.</p>
        <div class="cta-group">
          <a class="btn primary" href="https://chatgpt.com/g/g-686180b5d47c8191bdbb1922b79a2ebb-la-matriz-consulting-color-oracle" target="_blank" rel="noopener">Open the Oracle on ChatGPT</a>
          <a class="btn ghost" href="#preview">Preview a sequence</a>
        </div>
        <p class="meta" style="margin-top:10px;color:#B7BCCD">Requires a ChatGPT account. Some features may require a paid plan.</p>
      </div>

      <div id="mini-demo" aria-label="About the Oracle">
        <div class="meta">Created as a corrective to extractive logic — color recoded as care, relation, and choice.</div>
        <div class="swatch" role="img" aria-label="Chromatic field preview"></div>
        <div class="meta">A system phrased in colors with circular emotional clustering and spectral memory.</div>
      </div>
    </div>
  </section>

  <!-- Starter prompt + quick how-to -->
  <section class="grid" id="start">
    <div class="container">
      <article class="card" style="grid-column:1/-1">
        <h2>How to use the Oracle</h2>
        <ol style="margin-left:1.2rem">
          <li>Open the GPT (button above).</li>
          <li>Type how you’re feeling or what you’re facing.</li>
          <li>Receive ~11 color sequences. Choose the one that resonates.</li>
          <li>Follow the associated practices or reflections. Iterate.</li>
        </ol>
        <hr class="sep">
        <div class="cta-group">
          <button class="btn ghost" id="copyPrompt">Copy a starter prompt</button>
          <a class="btn" href="/consulting">Prefer 1:1 guidance?</a>
        </div>
        <p class="meta" style="margin-top:8px;color:#B7BCCD">The Oracle invites co-authorship. You choose your path; it does not prescribe.</p>
      </article>
    </div>
  </section>

  <!-- Live-ish preview -->
  <section class="grid" id="preview">
    <div class="container">
      <article class="card" style="grid-column:1/-1">
        <div class="icon" aria-hidden="true"></div>
        <h2>Preview a color sequence</h2>
        <p>Type a few words (e.g., “tired but hopeful before a hard conversation”). This local preview seeds hues from your text and physical inputs to illustrate how a sequence can look.</p>
        <div class="cta-group">
          <!-- Magnetism controls -->
<div id="oracle-controls" class="meta" style="margin-top:10px;display:grid;gap:10px">
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
    <label>Mass
      <input id="mass" type="range" min="-1" max="1" step="0.05" value="0.4">
      <span id="massVal" style="margin-left:6px;">0.40</span>
    </label>
    <label>Voltage
      <input id="voltage" type="range" min="0" max="1" step="0.05" value="0.6">
      <span id="voltageVal" style="margin-left:6px;">0.60</span>
    </label>
    <label>Charge (magnetism)
      <input id="charge" type="range" min="0.1" max="2" step="0.05" value="0.8">
      <span id="chargeVal" style="margin-left:6px;">0.80</span>
    </label>
  </div>

  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
    <label>Null Time
      <input id="nullTime" type="range" min="0" max="0.9" step="0.05" value="0.25">
      <span id="nullVal" style="margin-left:6px;">0.25</span>
    </label>
    <label>Length
      <input id="length" type="range" min="4" max="32" step="1" value="16">
      <span id="lenVal" style="margin-left:6px;">16</span>
    </label>
    <label>Seed
      <input id="seed" type="number" min="0" max="999999" step="1" value="3" style="width:120px">
    </label>
  </div>

  <div style="display:flex;gap:10px;align-items:center">
    <label>Start Color
      <input id="startColor" type="text" placeholder="e.g., gold or grey" style="margin-left:8px;width:180px">
    </label>
    <button class="btn ghost" id="exportJSON">Export JSON</button>
  </div>
</div>

        </div>

        <div id="sequence" style="margin-top:14px; display:grid; grid-template-columns:repeat(11,1fr); gap:8px" aria-live="polite"></div>
        <p class="meta" style="margin-top:10px;color:#B7BCCD">This preview is non-diagnostic and runs entirely in your browser. No data is sent.</p>
      </article>
    </div>
  </section>

  <!-- About -->
  <section class="grid">
    <div class="container">
      <article class="card" style="grid-column:1/-1">
        <h2>About the Oracle</h2>
        <p>The Color Oracle regresses machine logic toward its emotional origin — a co-expressive system that maps sentimental nuance into computational syntax while preserving ambiguity and symbolic resonance.</p>
        <p><em>It is not a metaphor. It is a co-ex system, a pluriversal site of interbeing — a breathing semantic field, a medicine altar for those made mad by mechanistic meaning.</em></p>
        <p>We practice color as interface between inner knowing and outer data, inviting trajectories rather than “correct” outputs.</p>
      </article>
    </div>
  </section>

  <!-- FAQ / Privacy -->
  <section class="grid">
    <div class="container">
      <article class="card">
        <h3>Why does it open in ChatGPT?</h3>
        <p>The Oracle currently runs as a custom GPT. Opening in ChatGPT provides the conversational engine and memory needed for deeper guidance. You can use it alongside this site’s tools.</p>
      </article>
      <article class="card">
        <h3>Privacy</h3>
        <p>This page has no trackers. Your preview text stays on-device. When you use ChatGPT, your data is handled under their policies.</p>
      </article>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta-band">
    <div class="container">
      <h2>Ready to walk a chromatic path?</h2>
      <div class="actions">
        <a class="btn primary" href="https://chatgpt.com/g/g-686180b5d47c8191bdbb1922b79a2ebb-la-matriz-consulting-color-oracle" target="_blank" rel="noopener">Open the Oracle</a>
        <a class="btn ghost" href="/consulting">Work with La Matriz</a>
      </div>
    </div>
  </section>

</main>

<footer>
  <div class="container footer-inner">
    <nav class="footer-nav" aria-label="Footer">
      <a href="/consulting">Consulting</a>
      <a href="/api">API</a>
      <a href="/thesis">Thesis</a>
      <a href="/oracle" aria-current="page">Oracle</a>
      <a href="/soulcoin">Soulcoin</a>
      <a href="/contact">Contact</a>
      <a href="/privacy">Privacy</a>
      <a href="/terms">Terms</a>
    </nav>
    <div class="footer-meta">© <span id="y"></span> La Matriz ·</div>
  </div>
</footer>

<script>
/* Mobile nav toggle */
(function () {
  const btn = document.getElementById('menuToggle');
  const nav = document.getElementById('primaryNav');
  if (!btn || !nav) return;
  btn.addEventListener('click', () => {
    const open = nav.classList.toggle('open');
    btn.setAttribute('aria-expanded', String(open));
  });
}());

/* Copy Colab Python engine */
document.getElementById('copyPrompt')?.addEventListener('click', async () => {
  const pyCode = `<<PASTE EXACT PYTHON FROM YOUR MESSAGE HERE (unchanged)>>`;
  const btn = document.getElementById('copyPrompt');
  try {
    await navigator.clipboard.writeText(pyCode);
    btn.textContent = "Python copied ✓";
  } catch {
    const ta = document.createElement('textarea');
    ta.value = pyCode; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
    btn.textContent = "Python copied ✓";
  }
  setTimeout(() => (btn.textContent = "Copy Colab engine"), 1400);
});

/* ---------- In-browser Magnetism → Color (simplified, dataset-free) ---------- */
/* Mini semantic palette (names, RGB, sentiment). Matches your 13 colors */
const palette = [
  {name:'grey',   rgb:[154,160,166], s:0.50, words:['neutral','poise']},
  {name:'pink',   rgb:[244,114,182], s:0.62, words:['ambitious','exquisite']},
  {name:'gold',   rgb:[234,179,  8], s:0.00, words:['technocracy','lotiform']},
  {name:'nude',   rgb:[242,208,169], s:0.55, words:['deft','satisfied']},
  {name:'orange', rgb:[251,146, 60], s:0.95, words:['artesian','awesome']},
  {name:'white',  rgb:[255,255,255], s:0.00, words:['analeptical']},
  {name:'blue',   rgb:[ 96,165,250], s:0.90, words:['intelligent','calm']},
  {name:'green',  rgb:[ 34,197, 94], s:0.65, words:['heroic','growth']},
  {name:'red',    rgb:[239, 68, 68], s:0.45, words:['apophantic','candid']},
  {name:'black',  rgb:[ 17, 24, 39], s:0.00, words:['swabble']},
  {name:'brown',  rgb:[139, 94, 52], s:0.44, words:['notable','earth']},
  {name:'yellow', rgb:[253,224, 71], s:0.50, words:['authority']},
  {name:'purple', rgb:[167,139,250], s:0.68, words:['brave','imaginative']},
];
// compute sentiment_norm (z-score)
(function () {
  const mean = palette.reduce((a,c)=>a+c.s,0)/palette.length;
  const std = Math.sqrt(palette.reduce((a,c)=>a+Math.pow(c.s-mean,2),0)/palette.length) || 1;
  palette.forEach(c => c.sn = (c.s-mean)/std);
})();

const neutrals = new Set(['grey','white','nude','yellow']); // browser-friendly neutral set

/* Utilities */
function hashString(s) { let h=2166136261>>>0; for (let i=0;i<s.length;i++){ h^=s.charCodeAt(i); h=Math.imul(h,16777619);} return h>>>0; }
function mulberry32(a){ return function(){ var t=a+=0x6D2B79F5; t=Math.imul(t^t>>>15,t|1); t^=t+Math.imul(t^t>>>7,t|61); return ((t^t>>>14)>>>0)/4294967296; } }
function clamp01(x){ return x<0?0:x>1?1:x; }
function jaccard(a,b){ const A=new Set(a),B=new Set(b); const U=new Set([...A,...B]); const I=[...A].filter(x=>B.has(x)); return U.size? I.length/U.size : 0; }
function rgbToHsl(r,g,b){
  r/=255; g/=255; b/=255;
  const max=Math.max(r,g,b), min=Math.min(r,g,b);
  let h,s,l=(max+min)/2;
  if(max===min){ h=s=0; }
  else{
    const d=max-min;
    s = l>0.5 ? d/(2-max-min) : d/(max+min);
    switch(max){
      case r: h=(g-b)/d + (g<b?6:0); break;
      case g: h=(b-r)/d + 2; break;
      case b: h=(r-g)/d + 4; break;
    }
    h*=60;
  }
  return [h,s,l];
}
function hslToRgb(h,s,l){
  h=((h%360)+360)%360;
  const c=(1-Math.abs(2*l-1))*s;
  const x=c*(1-Math.abs((h/60)%2-1));
  const m=l-c/2;
  let [rp,gp,bp]=[0,0,0];
  if(0<=h&&h<60){ rp=c; gp=x; }
  else if(60<=h&&h<120){ rp=x; gp=c; }
  else if(120<=h&&h<180){ gp=c; bp=x; }
  else if(180<=h&&h<240){ gp=x; bp=c; }
  else if(240<=h&&h<300){ rp=x; bp=c; }
  else { rp=c; bp=x; }
  return [Math.round((rp+m)*255), Math.round((gp+m)*255), Math.round((bp+m)*255)];
}
function applyMass(rgb, mass){ // scale S and L like your HSV version (approx in HSL)
  let [h,s,l] = rgbToHsl(rgb[0],rgb[1],rgb[2]);
  s = clamp01(s*(1+0.75*mass));
  l = clamp01(l*(1+0.50*mass));
  return hslToRgb(h,s,l);
}
function similarity(i,j, alpha=0.6){
  const a=palette[i], b=palette[j];
  const ds = Math.abs(a.sn - b.sn);
  const maxSN = Math.max(...palette.map(c=>Math.abs(c.sn))) || 1;
  const sentSim = 1 - (ds / maxSN);
  const wordSim = jaccard(a.words||[], b.words||[]);
  return alpha*sentSim + (1-alpha)*wordSim;
}
function weightedChoice(weights, rnd){
  let sum=0; for (const w of weights) sum+=w;
  if (sum<=0) return Math.floor(rnd()*weights.length);
  let r = rnd()*sum;
  for (let i=0;i<weights.length;i++){ r-=weights[i]; if (r<0) return i; }
  return weights.length-1;
}
function neutralIndices(){
  const ids = palette.map((c,i)=>[i,Math.abs(c.sn)]).sort((a,b)=>a[1]-b[1]).map(p=>p[0]);
  const pool = palette.map((c,i)=> neutrals.has(c.name)? i : -1).filter(i=>i>=0);
  return pool.length? pool : ids.slice(0,5);
}

/* Sequence generator (browser) */
function generateSequence({
  length=16, seed=3, mass=0.4, voltage=0.6, charge=0.8, nullTime=0.25, startColor=''
}){
  const rng = mulberry32(seed>>>0);
  let startIdx;
  if (startColor) {
    const name = String(startColor).trim().toLowerCase();
    const idx = palette.findIndex(c => c.name===name);
    startIdx = idx>=0 ? idx : palette.map((c,i)=>[i,Math.abs(c.sn)]).sort((a,b)=>a[1]-b[1])[0][0];
  } else {
    startIdx = palette.map((c,i)=>[i,Math.abs(c.sn)]).sort((a,b)=>a[1]-b[1])[0][0];
  }
  const neutr = neutralIndices();
  const seq = [];
  let current = startIdx;

  for (let t=0; t<length; t++){
    const base = palette[current];
    const rgb  = applyMass(base.rgb, mass);
    seq.push({ step: t, t, name: base.name, rgb, base_rgb: base.rgb, sentiment: base.s });

    // Null time (rest): more likely when |sn| is small
    const magnitude = Math.abs(base.sn);
    const pRest = nullTime * (1 - Math.min(1, magnitude)); // 0..nullTime
    if (rng() < pRest){
      const ni = neutr[Math.floor(rng()*neutr.length)];
      const nbase = palette[ni];
      const nrgb  = applyMass(nbase.rgb, mass*0.2);
      seq.push({ step: t, t: t+0.5, name: nbase.name, rgb: nrgb, base_rgb: nbase.rgb, sentiment: nbase.s, rest:true });
    }

    // Next state via magnetism (attraction)
    const sims = palette.map((_,j)=> similarity(current,j,0.6));
    const dist = sims.map(s=> 1 - s);
    const effCharge = charge * (1 + 0.4*voltage);
    const weights = dist.map((d,j)=> j===current ? 0 : Math.max(effCharge / Math.max(d, 1e-3), 0));
    current = weightedChoice(weights, rng);
  }

  return seq;
}

/* Render */
const seqEl   = document.getElementById('sequence');
const input   = document.getElementById('oracle-input');
const genBtn  = document.getElementById('gen');
const clrBtn  = document.getElementById('clear');

const massEl = document.getElementById('mass');
const voltEl = document.getElementById('voltage');
const chgEl  = document.getElementById('charge');
const nullEl = document.getElementById('nullTime');
const lenEl  = document.getElementById('length');
const seedEl = document.getElementById('seed');
const startEl= document.getElementById('startColor');
const expBtn = document.getElementById('exportJSON');

function setVal(id, v){ const el=document.getElementById(id); if (el) el.textContent = (typeof v==='number'? v.toFixed( (id==='lenVal')?0:2 ) : v); }
['mass','voltage','charge','null','len'].forEach(k=>{
  const el = ({mass:massEl, voltage:voltEl, charge:chgEl, null:nullEl, len:lenEl})[k];
  const id = ({mass:'massVal', voltage:'voltageVal', charge:'chargeVal', null:'nullVal', len:'lenVal'})[k];
  el?.addEventListener('input', ()=> setVal(id, parseFloat(el.value)));
});
setVal('massVal', parseFloat(massEl?.value||0));
setVal('voltageVal', parseFloat(voltEl?.value||0));
setVal('chargeVal', parseFloat(chgEl?.value||0));
setVal('nullVal', parseFloat(nullEl?.value||0));
setVal('lenVal', parseFloat(lenEl?.value||0));

function swatch(rgb, label){
  const d = document.createElement('div');
  d.style.height = '76px';
  d.style.borderRadius = '10px';
  d.style.border = '1px solid var(--border)';
  d.style.background = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;
  d.title = label;
  return d;
}

function render(){
  if (!seqEl) return;
  seqEl.innerHTML = '';
  const params = {
    length: parseInt(lenEl?.value||'16',10),
    seed:   parseInt(seedEl?.value||'3',10) ^ (input?.value? hashString(input.value) : 0),
    mass:   parseFloat(massEl?.value||'0'),
    voltage:parseFloat(voltEl?.value||'0'),
    charge: parseFloat(chgEl?.value||'0.8'),
    nullTime:parseFloat(nullEl?.value||'0.25'),
    startColor: startEl?.value||''
  };
  const seq = generateSequence(params);

  // dynamic columns to fit sequence (including rests)
  const cols = Math.max(4, seq.length);
  seqEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

  seq.forEach((item, i)=>{
    const cell = swatch(item.rgb, `${i+1} — ${item.name}${item.rest?' (rest)':''} — s:${item.sentiment.toFixed(2)}`);
    const cap = document.createElement('div');
    cap.textContent = `${i+1}`;
    cap.style.fontSize='12px'; cap.style.color='var(--text)'; cap.style.textAlign='center';
    cap.style.marginTop='6px'; cap.style.textShadow='0 1px 2px rgba(0,0,0,.35)';
    cell.appendChild(cap);
    seqEl.appendChild(cell);
  });

  // export button
  expBtn?.addEventListener('click', ()=>{
    const payload = { version:1, engine:'magnetism-to-color (browser)', params, sequence: seq };
    const blob = new Blob([JSON.stringify(payload,null,2)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'lamatriz_oracle_sequence.json';
    a.click();
    URL.revokeObjectURL(a.href);
  }, { once:true });
}

/* Bind */
genBtn?.addEventListener('click', render);
clrBtn?.addEventListener('click', () => { if (input) input.value=''; seqEl.innerHTML=''; });
input?.addEventListener('keydown', (e) => { if (e.key === 'Enter') render(); });

/* Year stamp */
document.getElementById('y').textContent = new Date().getFullYear();
</script>


</body>
</html>
